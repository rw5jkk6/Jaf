## fileとコマンドの見るランキング
- コマンド、ファイルの上から順番に優先度が高い
- システムに侵入後にする順番ではない
### コマンド
- `sudo -l`
- `find / -perm -u=s -type f 2>/dev/null`

- `ps aux` or `top`
  - `ps aux | grep root` SQLやcronが使えれば、それでrootを狙える
  - cronが動いていれば、具体的に何が動きているかわからないのでpspyを使う
  - `crontab -l`
    - 普通は権限が足りないので見れない。
    - その時は`cat /etc/crontab`見る

- ユーザが書き込めるファイルを探す
  - `find / -writable -type f 2>/dev/null | grep -v /proc/ | grep -v /sys/ `
  - これだと表示が多いので,`-type d`の方がいいかも
  - これは基本的に下のコマンドのと似たのになる
- ユーザの所有しているファイルを探す(groupは下にある)
  - `find / -type f -user 名前 2>/dev/null`
- backup,設定ファイル,passwdなどのファイルを探す
  - `find / -iname "*backup*" -type f 2>/dev/null`
  - "~"は`"*config*"`とか`"*passw*"`など


- `getcap -r / 2>/dev/null`
  - ケーパビリティのそれ自体がrootになれるものではないが、本来はsudo権限なので大きなヒントを得られることができることがある 
- `netstat -antp`または`ss -lntp`動いているポートを調べられる
  - ポートフォワーディングできる内部サイトがあるかもしれない。だいたい、SQL(3306),ssh(22)が動いている。それ以外は注意
  - デーモンを調べる
  - `systemctl status NetworkManager`
  - `systemctl status apparmor`
  - `journalctl -f`
- `id`自分自身が何か知る
  - 1番始めにする
  - sudoやlxdなどのグループに属していればrootに使える
  - 自分が何かのグループに属しているかを確認する。グループは下のコマンドを使う
  - `find / -group グループ名 2>/dev/null`
  - `cat /etc/group | grep グループ名`
- `uname -a`
  - 2番目にする
  - メモにコピーしておく 
- `iptables -L`
  - sudoつける必要ある 
- `apt list --installed`



### ファイル(ディレクトリ トラバーサルでも使える)
- どんなユーザがいるかを調べる
  - `cd /home; ls` 実際に使えるユーザを調べる
  - `cat /etc/passwd`
- `/var/www/html`Webサイトのディレクトリ
  - CMSならconfigファイルがある 
- `/home/ユーザ名/.ssh`上で調べたユーザ毎に調べる
- `/home/ユーザ名/.bash_history`などユーザの隠しファイル
- `/opt`

- `/home/`の上記以外
- `/tmp/`または`/var/tmp/`
- `/etc/サービスの設定ファイル`
- `/var/log/*`
- `/proc/self/environ`
  - ログポイズニングできるかもしれない 

### ファイルを外部から取得する
- linpeas.sh
- pspy
